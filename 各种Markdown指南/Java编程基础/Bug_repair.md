# 

解决 Bug 的能力也是衡量一个程序员水平的重要因素，大佬可能看到一个报错信息立刻就知道怎么解决，而新手可能连百度去搜一下报错都不知道。

![](https://pic.yupi.icu/5563/202404161044794.png)

## 解决Bug的流程套路总结

### 一、准备工作：

#### 1. 获取更多信息：

我们要搞清楚 Bug 何时发生？为什么会发生？在什么情况下发生？

用户到底做了什么操作，才导致了 Bug ？是每次都会出现 Bug，还是说点儿背触发了呢，如果是偶然触发，是否可复现呢？最好还能拿到用户详细的报错原因、请求和响应，信息多了，才能帮助我们更精准地定位和分析问题。

**不能复现的 Bug，还叫 Bug 么？（狗头）**

#### 2.  确定边界

举个例子，假如说用户突然访问不了你的网站了。这时千万别自己先搁那傻傻分析和排查一通，而是可以先访问下网站试试。要是你能访问的话，说不定根本就不是 Bug，而是用户自家的网线断了！

企业开发中往往是多人协作，比如前端和后端、服务提供者和服务调用者，如何判断是谁写的 Bug 呢？

一般我们可以通过 **接口** 的请求参数和响应参数来划分职责。

比如我是前端，请求你后端的接口，向你发送 "鱼皮"，你必须要返回我 "狗头"。结果最后出现 Bug 时，我一看，我给你发送的是 "鱼皮"，你却给我 "鱼头" 了对吧，那显然是你那边的 Bug，雨我无瓜。

#### 3. 保护现场

确定是自己的 Bug 后，如果是线上程序出了 Bug，记得先把当时的程序状态保留下来，比如 dump 内存、下载日志，便于后面排查。

就和破案一样，案发现场的东西千万不能随便乱碰，要不然可能就缺失了关键信息。

### 二、自行解决

每个人的时间都很宝贵，出了问题时，先不要盲目地去问别人，而是自主思考、自力更生。

可以通过以下方式自己解决：

#### 1、自查

程序出了问题时，最直接的排查方式就是：对程序的报错、已记录的错误日志进行分析。

比如看到程序报错 "db connection timeout"，显然就是数据库连接超时了，这个时候可以先去确认下是不是网络和数据库自身的问题，说不定就已经能解决 Bug 了。

如果不理解英文，是不是可以借助一些翻译工具呢？

#### 2、搜索引擎

俗话说得好，遇事不决问某度，这可能是大家最常用的解决 Bug 手段了。

但如今的某度搜索引擎对程序员不太友好，广告多、内容过时、点进去后文不对题，这些都会成为你搜索的障碍。

那大家不妨试试这些技巧：

1）屏蔽广告

在搜索词后加上 "-advertisement" 可以快速屏蔽搜索的广告信息：

2）站内搜索

使用 site:域名 + 搜索词，可以在特定的网站内快速搜索，像现在大部分 Bug 的解决方案其实都在 CSDN：

3）关键词搜索

使用某度搜索长句的时候，可以将错误信息中的关键词拆解出来，比如版本号、数据库类型等，使用空格进行连接叠加关键词，可以更加精准搜索想要的结果，避免连接词的干扰

4）限定范围

打开搜索工具，可以给搜索增加限定，比如时间、文件类型等。技术更新迭代太快，建议搜索时间范围 **`一年内`** 的文章，时效性更高一些。

比如大家可以试试 [开发者搜索](https://kaifa.baidu.com/) ，专门面向程序员的搜索引擎，纯净很多。而且看起来它的实现方式也很简单，就只从开发者相关网站中搜索内容就行了。

#### 3、询问AI工具

#### 4、官方文档

当我们使用一些冷门技术或者较新的技术时，国内的搜索引擎可能很难找到解决方案。

这时不妨打开官方文档，直接搜索到和自己问题相关的部分，仔细阅读一遍，说不定就发现其实是自己语法或参数写错了呢？

在官方文档搜索内容：

其实，很多 Bug 就是因为阅读文档不仔细而产生的！

对于组件库、SDK、类库、插件、API 的使用，我其实更倾向于去阅读官方文档，比较直接，一针见血。

#### 5、Github Issues

如果你使用的是开源的项目，那么可以试着在项目仓库的 issues 中搜索答案，尤其是知名项目，用的人很多，你遇到的 Bug 有可能别人也遇到过。

如果有解决方案，可以直接照搬；哪怕没有解决方案，你也可以试着发起一个 issue 提问，或者联系遇到类似 Bug 的同学，共同探索。

这也是一种直接和 GitHub 开源大佬交流的方式哦~

#### 6、追溯源码 Debug

除了依赖冲突、内存溢出之类的技术上的 Bug，其实我们工作中更多地是修复业务逻辑上的 Bug。比如做一个支付功能，用户 A 扣了钱，但是没有任何反应。

这种情况也别费功夫在网上搜了，因为每个人写的业务代码都不一样，五花八门。不如自己从程序的入口开始，用 Debug 打些断点、打印一些变量信息，一行一行慢慢调试就好了。

打断点调试：

如果你怀疑是某个依赖的类或方法出了问题，也可以直接点进去查看它的源码和注释。



### 三、寻求帮助

如果自己无法解决问题，我们就只能向他人求助了。但是，先明白一点，别人没有义务帮你解决问题，怎么才能让自己的问题更容易被别人帮忙解决呢？

#### 1、提问技巧

提问也是有技巧的，想要更快、更准确地获得答案，就要把你的问题、场景、前因后果、关键信息都提供清楚。

像鱼皮之前每天都会收到上百条私信提问，其中很多同学连自己要问什么都描述不清楚，比如：我网站为啥无法访问了？

这种问题别人怎么帮你解决呢？这不是耽误彼此的时间么？

建议在找别人提问前，请一定要把以下几点列举清楚，并且发送给你要提问的人：

1. 我遇到了什么问题？有什么现象？
2. 这个问题在什么情况下发生？是偶发还是必现？
3. 详细完整的报错信息和错误日志
4. 自己尝试过的所有解决方法和排查过程，请一一列举，比如有没有百度过？有没有看过官方文档？搜索的关键词是什么？（不要浪费别人的时间重复给你发已经试过的方案）
5. 如果需要补充代码，请不要拍照、或者代码只发一半，别人阅读体验会很差！推荐使用鱼皮团队开发的代码小抄工具（ [https://codecopy.cn/](https://www.codecopy.cn/) ），支持快速发布和多端阅读代码，提升别人阅读代码的体验。

#### 2、提问途径

想好问什么之后，找谁问呢？

首先是两大平台：国内的 CSDN 相对适合初学者；国外的 Stack Overflow ，更活跃、解答人数会更多。

前面也提到了，如果是开源项目，可以考虑在 GitHub 项目仓库下自己提一个新的 Issues ，艾特团队官方人员去解决。

![img](https://pic.yupi.icu/5563/202404161044212.png)

如果你用了别人提供的类库和服务，可以在官方文档中找到项目的维护者，联系他们并反馈。



## 常见Bug原因汇总

#### 中文编码

#### 代码不规范

我以前不注意代码规范，觉得反正是我自己写的代码，写的快、写的爽就完事了，管那么多干嘛？

但后来因为变量命名太过随意，导致自己写的代码自己都看不懂，更别提其他人来阅读和协作开发了。

就连之前粗心拼错的变量名也根本不敢乱改，生怕漏改了一个地方，就会报找不到变量的错误了！

#### 复制粘贴

复制粘贴可以说是我写代码时用的最多的技能了。

正常操作是：3 秒粘贴一个文件，随便改两下，代码能跑就行。

复制粘贴虽然好，但稍有不注意，可能就会漏修改一些变量名或注释， ：

这样的次数多了，往往会导致整个项目中出现很多相同的变量，其他同学要引入时，根本不知道应该选哪个！

#### 硬编码

写代码时经常会用到一些常量，就是固定的值，比如网站的地址、最大最小值、机器的 IP 地址等。

有时，为了图省事，我就是不单独为这些值定义变量。哪里用到这些值，我就复制粘贴一遍，直接写死到代码里，比如：

```plain
// 连接数据库，IP 写死
DB db = new DB("10.0.0.1");
```

这样虽然简单粗暴，但假如哪一天这些死值需要修改了，就得从所有文件中一个个去找用到这些值的代码，再一个个改掉，不仅麻烦，还很容易出现遗漏，从而产生 Bug。

#### 未释放资源

想从数据库中获取数据，就要先和数据库建立连接，占用连接资源。

数据库连接

拿到需要的数据后呢，我就忘了要把资源进行释放（close），结果导致数据库连接很快被占满，其他程序想访问都访问不了，导致很多功能失效。

不仅是新手，甚至有几年编程经验的同学都可能会犯这个错，因为不释放资源并不会功能的可用性，而且不压测的话很难发现这个 Bug。

此外，还有 HTTP 连接、文件输入输出流，这些都是资源，都要注意是否需要手动释放，稍有不慎，就会导致资源泄露的 Bug。

#### 圈复杂度过高

圈复杂度是衡量代码复杂度的标准，简单地说，if / else 分支越多，圈复杂度越大，往往表示代码越复杂。

起初是懒得去优化代码，但等到后来意识到情况不妙，想优化代码时，却发现这屎山已经动不得了。不光别人看不懂，我自己都看不懂了！

这种代码一旦要加增改逻辑，就很容易出现 Bug。所以建议在写复杂逻辑前先画流程图，理清楚代码、多写注释，还可以适当地用抽象、封装、设计模式之类的技术来减少代码的圈复杂度。

#### 依赖冲突

**依赖** 是指我们项目中要用到的框架、类库等等别人写好的代码和工具。

像我以前做项目图省事，要用到什么库都往项目里塞，而且都用最新版本的。直到工作后才发现，对于一个大项目，很多人同时开发，往往要引入很多很多依赖，稍有不慎就产生 **依赖冲突** 。

各种项目依赖

比如我给类库 A 引入了类库 C 的 1.0 版本，类库 B 引入了类库 C 的 2.0 版本，那如果项目要同时引入类库 A 和类库 B，到底该用类库 C 的哪个版本呢？

依赖冲突的后果往往就是项目起不来，更严重的是直到项目执行到冲突的函数时才突发 Bug。

#### 不区分环境

以前，我做网站时为了方便，在自己电脑上开发时，和已上线的项目用的是同一套环境，连接的是同一个数据库。

结果有一天，我就忘记了这个事，在开发时造了一条假的不行的假数据，还不小心上传了我的玉照：

结果大意了，这条数据实际上被插入到了线上的数据库中，导致线上几万个用户全都能看见。

这还是小事，万一你在本地开发时写了个 Bug，不小心把线上数据全给删了，那真的是要欲哭无泪了！

#### 不做自测

企业开发中，测试是很重要的。一般情况下，除了测试同学要设计用例外、开发同学也要写单元测试来自测。

像我以前就很自信，自己写好的代码能跑就行，从来不测试，就是一把梭！

但进入企业工作后，我发现不写单元测试真的很容易出现各种细节问题。可能下个版本改了行代码，之前正常的功能就突然报错了。

而且越往后发现问题，修改的成本就越大，要花更多时间去排查和修改 Bug，加班也在所难免。

#### 不做评估

以前在学校写代码，我一般就是学什么技术就用什么、会什么就用什么，也不去管是否能满足性能、数据量的要求。

进入大公司后，才意识到系统评估和技术选型的重要性。一般要评估系统的并发量、数据的量级、接口时延等，根据这些来选择合适的技术。

比如公司有一个千万数据量的项目，如果我不做评估和选型，无脑用 MySQL 数据库、并且不做任何优化，那这个系统估计分分钟挂掉。

![img](https://pic.yupi.icu/5563/202404161046263.jpeg)



#### 自作主张

在学校的时候习惯了单兵作战，想改什么代码就改什么，也不去思考对现有系统、对其他系统的影响。

但在企业中，尤其是调用关系很复杂的链路系统中，如果你修改了接口的返回值，或者改变了接口的并发量、返回时长等。分分钟，依赖你接口的同事就都来登门拜谢了。

为了预防这种情况，建议整理下自己的接口依赖哪些接口、又被哪些接口调用。在你需要改动代码时，需要评估改动对于其他系统的影响，并且及时通知相关负责人。而不是自作主张，只关注自己的一亩三分地。

#### 文档读不全

现在的技术框架啥的，一般都提供了非常详细的使用文档。

技术文档

但我以前读文档时，为了追求效率，只要看到有自己需要的函数，立刻就直接复制过来用了，而不是选择把文档完整读完。

结果呢，因为盲目自信，很多文档中重点强调的注意事项没有看到，导致了很多傻不拉几的低级 Bug，还在网上到处搜解决方案，浪费时间。

#### 版本号错误

读文档和看教程学技术可不一样，不要盲目追求最新的，而是要根据实际情况，选择和自己项目中引入一致的版本。

记得我刚开始跟着文档学编程时，写的很多 Bug 都是因为阅读文档前没有注意版本号，导致很多使用到的语法不是被淘汰了就是还不支持，然后就会怀疑人生。

#### 不了解需求

写代码之前，一定要了解需求，就是要做什么？为什么要做？

否则就会像我刚进入公司时，有个功能点没搞懂，也不去问、不敢问产品同学，全靠自己自由发挥。就最后哪怕我的代码能运行、没 Bug，但并不是用户想要的，那不就表示：我程序的存在本身就是个 Bug？

#### 不做设计

写代码和盖房子一样，一定要先想好怎么写代码，再去写。

尤其是业务流程复杂的时候，不要仗着自己聪明或者经验丰富，就不写方案、不做设计，而是直接打开编辑器就写代码。

这样做很容易遗漏一些要考虑的关键点，说不定直到最后，才发现有大问题，结果整段逻辑都要全部删掉重新写！效率反而更低。

------

最后，一定要记住！想学好编程，就要多写代码、多试错、多解决 Bug、多积累总结。几年之后，再来看当时的翻车经历，也是宝贵的财富啊。

##  常见请求错误码解释及解决方案

当我们发现前端报错时（比如数据为空、数据展示错误、点击按钮后没有任何反映、提交错误等），首先要按 F12 打开浏览器的开发者工具，查看网络请求的状态码和响应结果，从而快速判断问题到底出现在前端还是后端。

![img](https://pic.yupi.icu/5563/202404161047159.png)

而如果请求的状态码是其他 4 开头或者 5 开头的，需要再去针对性地分析。当然，针对不同的状态码，我们有一些常见的 Bug 解决套路。

这篇文章，会给大家解释常见的请求错误码，并列举一些通用的 Bug 解决方案。

大家以后遇到对应的错误码时，直接在该文档中搜索解决方案即可，掌握排错技巧，提高排错效率~



